<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.metanet.team4.member.mapper.member.MemberMapper">

    <!-- ✅ 모든 사용자 조회 (관리자 전용) -->
    <select id="selectAllMembers" resultType="com.metanet.team4.member.model.Member">
        SELECT * FROM member ORDER BY userid
    </select>

    <!-- ✅ 사용자 정보 조회 -->
    <select id="findByUserid" parameterType="string" resultType="com.metanet.team4.member.model.Member" useCache="false">
        SELECT * FROM member WHERE userid = #{userid}
    </select>

    <!-- ✅ 사용자 역할 변경 (관리자 전용) -->
    <update id="updateUserRole">
        UPDATE member SET role = #{role} WHERE userid = #{userid}
    </update>

    <!-- ✅ 사용자 삭제 (관리자 전용) -->
    <delete id="deleteMemberById">
        DELETE FROM member WHERE userid = #{userid}
    </delete>

    <!-- ✅ 비밀번호 변경 (사용자 전용) -->
    <update id="updatePassword">
        UPDATE member SET password = #{password} WHERE userid = #{userid}
    </update>

    <!-- ✅ 프로필 사진 변경 (사용자 전용) -->
    <update id="updateProfilePic">
        UPDATE member SET profile_pic = #{filename} WHERE userid = #{userid}
    </update>

</mapper>
